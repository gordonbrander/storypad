<!DOCTYPE html>
<% documents = @getDocumentSiblingsSortedByFilenameIndexFirst(@document) %>
<% nextDocument = @getAdjacentById(documents, @document.id, 1) %>
<% prevDocument = @getAdjacentById(documents, @document.id, -1) %>
<% htmlStyleAttr = if @document.html_style then 'style="' + @document.html_style + '"' else '' %>
<% htmlClasses = @document.html_classes %>

<!--[if lt IE 7]>      <html <%- htmlStyleAttr %> class="<%= @classname('no-js lt-ie9 lt-ie8 lt-ie7', htmlClasses) %>"> <![endif]-->
<!--[if IE 7]>         <html <%- htmlStyleAttr %> class="<%= @classname('no-js lt-ie9 lt-ie8', htmlClasses) %>"> <![endif]-->
<!--[if IE 8]>         <html <%- htmlStyleAttr %> class="<%= @classname('no-js lt-ie9', htmlClasses) %>"> <![endif]-->
<!--[if gt IE 8]><!--> <html <%- htmlStyleAttr %> class="<%= @classname('no-js', htmlClasses) %>"> <!--<![endif]-->

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width" />

  <title><%= @getPreparedTitle() %></title>
  <meta name="description" content="<%= @getPreparedDescription() %>" />
  <meta name="keywords" content="<%= @getPreparedKeywords() %>" />

  <%- @getBlock('meta').toHTML() %>

  <!-- See https://developer.mozilla.org/en-US/docs/Link_prefetching_FAQ -->
  <% if nextDocument: %>
    <link rel="prefetch" href="<%= @prependBasePath(nextDocument.url) %>">
  <% end %>

  <%- @getBlock('styles').add(@site.styles).add(@replaceAll(@document.styles, [['@site.url', @site.url]])).toHTML() %>
</head>
<body>
  <%- @content %>
  <% if @document.credit: %>
    <a href="<%= @document.credit.url %>" class="credit"><%= @document.credit.text %></a>
  <% end %>
  <% offset = ((documents.length * 13) + (49 * 2)) / 2 %>
  <nav id="artboard-nav" class="artboard-nav">
    <ul class="artboard-paging" style="margin-left: -<%= offset %>px">
    <% if prevDocument: %>
      <li><a class="prev" href="<%= @prependBasePath(prevDocument.url) %>">Prev</a></li>
    <% else: %>
      <li><span class="prev">Prev</span></li>
    <% end %>
    <% for document in documents: %>
      <% if (@document.id == document.id): %>
        <li><a class="page activated" href="<%= @prependBasePath(document.url) %>"><span><%= document.title %></span></a></li>
      <% else: %>
        <li><a class="page" href="<%= @prependBasePath(document.url) %>"><span><%= document.title %></span></a></li>      
      <% end %>
    <% end %>
    <% if nextDocument: %>
      <li><a class="next" href="<%= @prependBasePath(nextDocument.url) %>">Next</a></li>
    <% else: %>
      <li><span class="next" %>">Next</span></li>
    <% end %>
  </ul>
  </nav>
  <%- @getBlock('scripts').add(@site.scripts).add(@replaceAll(@document.scripts, [['@site.url', @site.url]])).toHTML() %>
</body>
</html>
